syntax = "proto3";

package razpravljalnica;

option go_package = "api/razpravljalnica/protobufDataPlane;razpravljalnica";

import "protobufStorage/protobufStorage.proto";

message UpdateRequest {
    int64 sequence_number = 1;
    razpravljalnica.OpType op = 2;
    razpravljalnica.Message message = 3;
    razpravljalnica.User user = 4; // For OP_CREATE_USER operations
    razpravljalnica.Topic topic = 5; // For OP_CREATE_TOPIC operations
}

message AcknowledgeResponse {
    int64 sequence_number = 1;
    bool success = 2;
}

service DataPlane {
    rpc ForwardUpdate(UpdateRequest) returns (AcknowledgeResponse); 
}